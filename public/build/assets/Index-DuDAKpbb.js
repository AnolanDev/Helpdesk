import{I as U,q as C,s as F,x as I,c as M,w as i,b as e,a as u,n as p,f as c,g as a,i as B,o as r,t as o,d as y,l as g,e as O,k as w,G as P,F as v,y as b,H as V,v as D,z as E}from"./app-Dn3LZCF8.js";import{_ as h,a as G}from"./Card-I8oawKJ5.js";const $={class:"space-y-6"},q={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},J={class:"flex items-center gap-3"},K=["disabled"],Q={class:"mt-2 text-sm text-secondary-600"},W={key:0,class:"text-xs text-secondary-500"},X={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4"},Y={class:"flex items-center justify-between"},Z={class:"mt-2 text-3xl font-bold text-secondary-900"},ee={class:"flex items-center justify-between"},te={class:"mt-2 text-3xl font-bold text-secondary-900"},se={class:"flex items-center justify-between"},oe={class:"mt-2 text-3xl font-bold text-secondary-900"},re={class:"flex items-center justify-between"},ne={class:"mt-2 text-3xl font-bold text-secondary-900"},le={class:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3"},ae=["value"],ie=["value"],de=["value"],ue={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},ce={class:"flex items-center gap-2"},me={key:0,class:"py-12 text-center"},xe={key:1,class:"space-y-4 md:hidden"},fe={class:"mb-3 flex items-start justify-between"},pe={class:"flex-1 min-w-0"},ye={class:"flex items-center gap-2 text-xs text-secondary-600 mb-1"},ge={class:"truncate"},ve={class:"text-sm font-medium text-primary-600 truncate"},be={class:"mb-3 text-sm font-semibold text-secondary-900 line-clamp-2"},he={class:"flex flex-wrap gap-2 mb-3"},we={class:"flex items-center gap-2 text-xs text-secondary-600"},ke={class:"truncate"},_e={key:2,class:"hidden overflow-x-auto md:block"},je={class:"min-w-full divide-y divide-secondary-200"},Ce={class:"divide-y divide-secondary-200 bg-white"},Me={class:"whitespace-nowrap px-4 py-4"},Be={class:"text-sm text-secondary-900"},Ve={class:"whitespace-nowrap px-4 py-4"},Se={class:"px-4 py-4"},Te={class:"max-w-xs"},ze={class:"whitespace-nowrap px-4 py-4"},He={class:"whitespace-nowrap px-4 py-4"},Ae={class:"whitespace-nowrap px-4 py-4 text-sm text-secondary-900"},Le={class:"whitespace-nowrap px-4 py-4 text-right text-sm"},Ee={key:3,class:"mt-4 border-t border-secondary-200 pt-4"},Re={class:"mb-3 text-center text-sm text-secondary-700 md:mb-0 md:text-left"},Ne={class:"font-medium"},Ue={class:"font-medium"},Fe={class:"font-medium"},Ie={class:"flex flex-wrap justify-center gap-2 md:justify-end"},Oe=45e3,Ge={__name:"Index",props:{tickets:Object,filters:Object,statuses:Object,priorities:Object,categories:Object,users:Array,stats:Object},setup(n){const x=n,l=U({search:x.filters.search||"",status:x.filters.status||"",priority:x.filters.priority||"",category:x.filters.category||"",assigned_to:x.filters.assigned_to||"",show_closed:x.filters.show_closed||!1}),f=C(!1),_=C(""),k=C(null),j=()=>{E.get(route("tickets.index"),l,{preserveState:!0,preserveScroll:!0})},R=()=>{l.search="",l.status="",l.priority="",l.category="",l.assigned_to="",l.show_closed=!1,j()},S=()=>{f.value||(f.value=!0,E.reload({preserveState:!0,preserveScroll:!0,only:["tickets","stats"],onSuccess:()=>{T(),f.value=!1},onError:()=>{f.value=!1}}))},N=()=>{S()},T=()=>{const d=new Date;_.value=d.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})},z=()=>{T(),k.value=setInterval(()=>{document.hidden||S()},Oe)},H=()=>{k.value&&(clearInterval(k.value),k.value=null)};F(()=>{z(),document.addEventListener("visibilitychange",()=>{document.hidden?H():z()})}),I(()=>{H()});const A=d=>{const t={blue:"bg-blue-100 text-blue-800",cyan:"bg-cyan-100 text-cyan-800",yellow:"bg-yellow-100 text-yellow-800",orange:"bg-orange-100 text-orange-800",green:"bg-green-100 text-green-800",gray:"bg-gray-100 text-gray-800",red:"bg-red-100 text-red-800"};return t[d]||t.gray},L=d=>{const t={gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"};return t[d]||t.gray};return(d,t)=>(r(),M(G,null,{default:i(()=>[e("div",$,[e("div",q,[e("div",null,[e("div",J,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold text-secondary-900 sm:text-3xl"},"Tickets de Soporte",-1)),e("button",{onClick:N,disabled:f.value,class:p(["rounded-lg p-2 text-secondary-600 transition-all hover:bg-secondary-100 hover:text-secondary-900 disabled:opacity-50",{"animate-spin":f.value}]),title:"Actualizar listado"},[...t[5]||(t[5]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,K)]),e("p",Q,[t[7]||(t[7]=c(" Gestiona y da seguimiento a los tickets del helpdesk ",-1)),_.value?(r(),a("span",W," • Actualizado "+o(_.value),1)):B("",!0)])]),u(y(g),{href:d.route("tickets.create"),class:"inline-flex items-center justify-center gap-2 rounded-lg bg-primary-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm transition-all hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:i(()=>[...t[8]||(t[8]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),c(" Nuevo Ticket ",-1)])]),_:1},8,["href"])]),e("div",X,[u(h,{variant:"elevated"},{default:i(()=>[e("div",Y,[e("div",null,[t[9]||(t[9]=e("p",{class:"text-sm font-medium text-secondary-600"},"Abiertos",-1)),e("p",Z,o(n.stats.open),1)]),t[10]||(t[10]=e("div",{class:"rounded-full bg-blue-100 p-3"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1))])]),_:1}),u(h,{variant:"elevated"},{default:i(()=>[e("div",ee,[e("div",null,[t[11]||(t[11]=e("p",{class:"text-sm font-medium text-secondary-600"},"En Progreso",-1)),e("p",te,o(n.stats.in_progress),1)]),t[12]||(t[12]=e("div",{class:"rounded-full bg-yellow-100 p-3"},[e("svg",{class:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1))])]),_:1}),u(h,{variant:"elevated"},{default:i(()=>[e("div",se,[e("div",null,[t[13]||(t[13]=e("p",{class:"text-sm font-medium text-secondary-600"},"Pendientes",-1)),e("p",oe,o(n.stats.pending),1)]),t[14]||(t[14]=e("div",{class:"rounded-full bg-orange-100 p-3"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),_:1}),u(h,{variant:"elevated"},{default:i(()=>[e("div",re,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-sm font-medium text-secondary-600"},"Vencidos",-1)),e("p",ne,o(n.stats.overdue),1)]),t[16]||(t[16]=e("div",{class:"rounded-full bg-red-100 p-3"},[e("svg",{class:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1))])]),_:1})]),u(h,{variant:"elevated"},{default:i(()=>[e("form",{onSubmit:O(j,["prevent"]),class:"space-y-4"},[e("div",null,[t[17]||(t[17]=e("label",{for:"search",class:"block text-sm font-medium text-secondary-700"},"Buscar",-1)),w(e("input",{id:"search","onUpdate:modelValue":t[0]||(t[0]=s=>l.search=s),type:"text",placeholder:"Número, título...",class:"mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm"},null,512),[[P,l.search]])]),e("div",le,[e("div",null,[t[19]||(t[19]=e("label",{for:"status",class:"block text-sm font-medium text-secondary-700"},"Estado",-1)),w(e("select",{id:"status","onUpdate:modelValue":t[1]||(t[1]=s=>l.status=s),class:"mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm"},[t[18]||(t[18]=e("option",{value:""},"Todos",-1)),(r(!0),a(v,null,b(n.statuses,(s,m)=>(r(),a("option",{key:m,value:m},o(s),9,ae))),128))],512),[[V,l.status]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"priority",class:"block text-sm font-medium text-secondary-700"},"Prioridad",-1)),w(e("select",{id:"priority","onUpdate:modelValue":t[2]||(t[2]=s=>l.priority=s),class:"mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm"},[t[20]||(t[20]=e("option",{value:""},"Todas",-1)),(r(!0),a(v,null,b(n.priorities,(s,m)=>(r(),a("option",{key:m,value:m},o(s),9,ie))),128))],512),[[V,l.priority]])]),e("div",null,[t[23]||(t[23]=e("label",{for:"category",class:"block text-sm font-medium text-secondary-700"},"Categoría",-1)),w(e("select",{id:"category","onUpdate:modelValue":t[3]||(t[3]=s=>l.category=s),class:"mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm"},[t[22]||(t[22]=e("option",{value:""},"Todas",-1)),(r(!0),a(v,null,b(n.categories,(s,m)=>(r(),a("option",{key:m,value:m},o(s),9,de))),128))],512),[[V,l.category]])])]),e("div",ue,[e("label",ce,[w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>l.show_closed=s),type:"checkbox",class:"rounded border-secondary-300 text-primary-600 focus:ring-primary-500 h-5 w-5",onChange:j},null,544),[[D,l.show_closed]]),t[24]||(t[24]=e("span",{class:"text-sm text-secondary-700"},"Mostrar tickets cerrados",-1))]),e("div",{class:"flex gap-2"},[t[25]||(t[25]=e("button",{type:"submit",class:"flex-1 sm:flex-initial rounded-lg bg-primary-600 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Filtrar ",-1)),e("button",{type:"button",onClick:R,class:"flex-1 sm:flex-initial rounded-lg border border-secondary-300 bg-white px-6 py-2.5 text-sm font-semibold text-secondary-700 shadow-sm hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2"}," Limpiar ")])])],32)]),_:1}),u(h,{variant:"elevated"},{default:i(()=>[n.tickets.data.length===0?(r(),a("div",me,[...t[26]||(t[26]=[e("svg",{class:"mx-auto h-12 w-12 text-secondary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1),e("h3",{class:"mt-2 text-sm font-semibold text-secondary-900"},"No hay tickets",-1),e("p",{class:"mt-1 text-sm text-secondary-500"},"Comienza creando un nuevo ticket de soporte.",-1)])])):(r(),a("div",xe,[(r(!0),a(v,null,b(n.tickets.data,s=>(r(),M(y(g),{key:s.id,href:d.route("tickets.show",s.id),class:"block rounded-lg border border-secondary-200 p-4 transition-all hover:border-primary-300 hover:shadow-md"},{default:i(()=>[e("div",fe,[e("div",pe,[e("div",ye,[t[27]||(t[27]=e("svg",{class:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",ge,o(s.user_name),1)]),e("p",ve,o(s.ticket_number),1)]),t[28]||(t[28]=e("svg",{class:"h-5 w-5 flex-shrink-0 text-secondary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))]),e("h3",be,o(s.title),1),e("div",he,[e("span",{class:p([A(s.status_color),"inline-flex rounded-full px-2 py-1 text-xs font-semibold"])},o(s.status_label),3),e("span",{class:p([L(s.priority_color),"inline-flex rounded-full px-2 py-1 text-xs font-semibold"])},o(s.priority_label),3)]),e("div",we,[t[29]||(t[29]=e("svg",{class:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})],-1)),e("span",ke,o(s.assigned_name||"Sin asignar"),1)])]),_:2},1032,["href"]))),128))])),n.tickets.data.length>0?(r(),a("div",_e,[e("table",je,[t[31]||(t[31]=e("thead",{class:"bg-secondary-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-secondary-500"}," Usuario "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-secondary-500"}," Ticket "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-secondary-500"}," Título "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-secondary-500"}," Estado "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-secondary-500"}," Prioridad "),e("th",{class:"px-4 py-3 text-left text-xs font-medium uppercase tracking-wider text-secondary-500"}," Asignado a "),e("th",{class:"px-4 py-3 text-right text-xs font-medium uppercase tracking-wider text-secondary-500"}," Acciones ")])],-1)),e("tbody",Ce,[(r(!0),a(v,null,b(n.tickets.data,s=>(r(),a("tr",{key:s.id,class:"hover:bg-secondary-50"},[e("td",Me,[e("div",Be,o(s.user_name),1)]),e("td",Ve,[u(y(g),{href:d.route("tickets.show",s.id),class:"text-sm font-medium text-primary-600 hover:text-primary-700"},{default:i(()=>[c(o(s.ticket_number),1)]),_:2},1032,["href"])]),e("td",Se,[e("div",Te,[u(y(g),{href:d.route("tickets.show",s.id),class:"text-sm font-medium text-secondary-900 hover:text-primary-600"},{default:i(()=>[c(o(s.title),1)]),_:2},1032,["href"])])]),e("td",ze,[e("span",{class:p([A(s.status_color),"inline-flex rounded-full px-2 py-1 text-xs font-semibold"])},o(s.status_label),3)]),e("td",He,[e("span",{class:p([L(s.priority_color),"inline-flex rounded-full px-2 py-1 text-xs font-semibold"])},o(s.priority_label),3)]),e("td",Ae,o(s.assigned_name||"Sin asignar"),1),e("td",Le,[u(y(g),{href:d.route("tickets.show",s.id),class:"text-primary-600 hover:text-primary-700"},{default:i(()=>[...t[30]||(t[30]=[c(" Ver ",-1)])]),_:1},8,["href"])])]))),128))])])])):B("",!0),n.tickets.data.length>0?(r(),a("div",Ee,[e("div",Re,[t[32]||(t[32]=c(" Mostrando ",-1)),e("span",Ne,o(n.tickets.from),1),t[33]||(t[33]=c(" a ",-1)),e("span",Ue,o(n.tickets.to),1),t[34]||(t[34]=c(" de ",-1)),e("span",Fe,o(n.tickets.total),1),t[35]||(t[35]=c(" resultados ",-1))]),e("div",Ie,[(r(!0),a(v,null,b(n.tickets.links,s=>(r(),M(y(g),{key:s.label,href:s.url||"#",class:p([s.active?"bg-primary-600 text-white":"bg-white text-secondary-700 hover:bg-secondary-50",s.url?"":"cursor-not-allowed opacity-50","rounded-lg border border-secondary-300 px-3 py-2 text-sm font-medium min-w-[40px] flex items-center justify-center"]),innerHTML:s.label},null,8,["href","class","innerHTML"]))),128))])])):B("",!0)]),_:1})])]),_:1}))}};export{Ge as default};
