import{q as B,g as r,b as e,F as C,y as $,i as d,n as y,t as l,f,J as N,o as s,p as se,j as R,u as H,s as oe,x as re,c as O,w as g,a as v,d as u,l as q,e as ne,k as z,G as ie,H as L,z as A}from"./app-Dn3LZCF8.js";import{_ as M,a as ae}from"./Card-I8oawKJ5.js";const le={class:"space-y-4"},de={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},ce={class:"flex flex-col gap-2 sm:flex-row"},ue=["disabled"],me={key:0,class:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},xe={key:1,class:"h-4 w-4 flex-shrink-0 animate-spin",fill:"none",viewBox:"0 0 24 24"},ye=["disabled"],pe={key:0,class:"h-4 w-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},ge={key:1,class:"h-4 w-4 flex-shrink-0 animate-spin",fill:"none",viewBox:"0 0 24 24"},fe={key:0,class:"flow-root"},ve={role:"list",class:"-mb-8"},ke={class:"relative pb-8"},he={key:0,class:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-secondary-200","aria-hidden":"true"},be={class:"relative flex items-start space-x-3"},we=["d"],_e={class:"min-w-0 flex-1"},Me={class:"text-sm"},Ce={class:"font-medium text-secondary-900"},$e={class:"mt-0.5 text-sm text-secondary-500"},je={key:0,class:"text-secondary-400"},Se={key:0,class:"mt-2 text-sm text-secondary-700"},Ee={key:0,class:"inline-flex items-center"},ze={class:"ml-1 px-2 py-0.5 rounded bg-red-100 text-red-800"},Ae={class:"ml-1 px-2 py-0.5 rounded bg-green-100 text-green-800"},Be={key:1,class:"mt-2"},Ve={class:"text-sm"},Te={class:"mt-2 pl-4 border-l-2 border-secondary-200"},Re={class:"space-y-1"},He={class:"inline font-medium text-secondary-700"},Le={class:"inline ml-2 text-secondary-600"},De={key:1,class:"text-center py-12"},Ue={__name:"TicketTimeline",props:{activities:{type:Array,default:()=>[]},ticketId:{type:Number,required:!0}},setup(o){const k=o,m=B(!1),j=i=>{const n={"plus-circle":"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z","user-plus":"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z",refresh:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15","clipboard-list":"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",flag:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9",tag:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",chat:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z","check-circle":"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z","x-circle":"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z","arrow-circle-up":"M9 11l3-3m0 0l3 3m-3-3v8m0-13a9 9 0 110 18 9 9 0 010-18z",edit:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z",clock:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"};return n[i]||n.clock},b=i=>({blue:"bg-blue-500",purple:"bg-purple-500",yellow:"bg-yellow-500",orange:"bg-orange-500",indigo:"bg-indigo-500",cyan:"bg-cyan-500",green:"bg-green-500",gray:"bg-secondary-500"})[i]||"bg-secondary-500",w=i=>"text-white",p=i=>new Date(i).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),_=async()=>{m.value=!0;try{const i=await N.get(route("tickets.export-activities",{ticket:k.ticketId,format:"excel"}),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([i.data])),a=document.createElement("a");a.href=n,a.setAttribute("download",`ticket-${k.ticketId}-activities.xlsx`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n)}catch(i){console.error("Error exporting to Excel:",i),alert("Error al exportar a Excel")}finally{m.value=!1}},h=async()=>{m.value=!0;try{const i=await N.get(route("tickets.export-activities",{ticket:k.ticketId,format:"pdf"}),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([i.data])),a=document.createElement("a");a.href=n,a.setAttribute("download",`ticket-${k.ticketId}-activities.pdf`),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n)}catch(i){console.error("Error exporting to PDF:",i),alert("Error al exportar a PDF")}finally{m.value=!1}};return(i,n)=>(s(),r("div",le,[e("div",de,[n[6]||(n[6]=e("h3",{class:"text-lg font-medium text-secondary-900"},"BitÃ¡cora de Actividad",-1)),e("div",ce,[e("button",{onClick:_,class:"inline-flex items-center justify-center gap-2 rounded-lg border border-secondary-300 bg-white px-4 py-2.5 text-sm font-medium text-secondary-700 shadow-sm hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors disabled:opacity-50 min-h-[44px]",disabled:m.value},[m.value?(s(),r("svg",xe,[...n[1]||(n[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),r("svg",me,[...n[0]||(n[0]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])])),n[2]||(n[2]=e("span",null,"Exportar a Excel",-1))],8,ue),e("button",{onClick:h,class:"inline-flex items-center justify-center gap-2 rounded-lg border border-secondary-300 bg-white px-4 py-2.5 text-sm font-medium text-secondary-700 shadow-sm hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors disabled:opacity-50 min-h-[44px]",disabled:m.value},[m.value?(s(),r("svg",ge,[...n[4]||(n[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),r("svg",pe,[...n[3]||(n[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)])])),n[5]||(n[5]=e("span",null,"Exportar a PDF",-1))],8,ye)])]),o.activities&&o.activities.length>0?(s(),r("div",fe,[e("ul",ve,[(s(!0),r(C,null,$(o.activities,(a,V)=>(s(),r("li",{key:a.id},[e("div",ke,[V!==o.activities.length-1?(s(),r("span",he)):d("",!0),e("div",be,[e("div",{class:y(["relative px-1 flex items-center justify-center h-10 w-10 rounded-full ring-8 ring-white",b(a.color)])},[(s(),r("svg",{class:y(["h-5 w-5",w(a.color)]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:j(a.icon)},null,8,we)],2))],2),e("div",_e,[e("div",null,[e("div",Me,[e("span",Ce,l(a.description),1)]),e("p",$e,[f(l(a.time_ago)+" ",1),a.created_at?(s(),r("span",je," ("+l(p(a.created_at))+") ",1)):d("",!0)])]),a.old_value||a.new_value?(s(),r("div",Se,[a.old_value?(s(),r("div",Ee,[n[7]||(n[7]=e("span",{class:"text-secondary-500"},"De:",-1)),e("span",ze,l(a.old_value),1)])):d("",!0),a.new_value?(s(),r("div",{key:1,class:y(["inline-flex items-center",{"ml-3":a.old_value}])},[n[8]||(n[8]=e("span",{class:"text-secondary-500"},"A:",-1)),e("span",Ae,l(a.new_value),1)],2)):d("",!0)])):d("",!0),a.changes&&Object.keys(a.changes).length>0?(s(),r("div",Be,[e("details",Ve,[n[9]||(n[9]=e("summary",{class:"cursor-pointer text-secondary-600 hover:text-secondary-900"},"Ver detalles",-1)),e("div",Te,[e("dl",Re,[(s(!0),r(C,null,$(a.changes,(T,S)=>(s(),r("div",{key:S},[e("dt",He,l(S)+":",1),e("dd",Le,l(T||"(vacÃ­o)"),1)]))),128))])])])])):d("",!0)])])])]))),128))])])):(s(),r("div",De,[...n[10]||(n[10]=[e("svg",{class:"mx-auto h-12 w-12 text-secondary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-secondary-900"},"No hay actividades",-1),e("p",{class:"mt-1 text-sm text-secondary-500"},"Las actividades del ticket aparecerÃ¡n aquÃ­.",-1)])]))]))}},Ie={class:"mx-auto max-w-5xl space-y-6"},Fe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},Pe={class:"flex items-center gap-3 sm:gap-4"},Ne={class:"min-w-0 flex-1"},Oe={class:"flex items-center gap-2"},qe={class:"text-xl font-bold text-secondary-900 sm:text-2xl truncate"},Ge=["disabled"],Je={class:"mt-1 text-xs text-secondary-600 sm:text-sm"},Ke={key:0,class:"text-xs text-secondary-500"},Qe={class:"flex items-center gap-3"},We={class:"grid gap-6 lg:grid-cols-3"},Xe={class:"space-y-6 lg:col-span-2"},Ye={class:"space-y-4"},Ze={class:"text-xl font-bold text-secondary-900"},et={class:"mt-3 flex flex-wrap items-center gap-3"},tt={class:"inline-flex items-center gap-1 text-sm text-secondary-600"},st={class:"border-t border-secondary-200 pt-4"},ot={class:"mt-2 whitespace-pre-wrap text-sm text-secondary-700"},rt={class:"space-y-4"},nt={class:"flex items-start justify-between"},it={class:"flex items-center gap-3"},at={class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary-100 text-sm font-semibold text-primary-600"},lt={class:"text-sm font-medium text-secondary-900"},dt={class:"text-xs text-secondary-500"},ct={class:"flex items-center gap-2"},ut={key:0,class:"inline-flex items-center gap-1 rounded-full bg-amber-100 px-2 py-1 text-xs font-medium text-amber-800"},mt={class:"mt-3 whitespace-pre-wrap text-sm text-secondary-700"},xt={key:0,class:"py-8 text-center"},yt={class:"mt-6 border-t border-secondary-200 pt-6"},pt={key:0,class:"mb-4 flex gap-2"},gt={key:0,class:"mt-1 text-sm text-red-600"},ft={class:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"},vt={class:"flex-1"},kt={key:0,value:"internal"},ht={key:1,value:"solution"},bt={class:"mt-1 text-xs text-secondary-500"},wt={key:0},_t={key:1},Mt={key:2},Ct=["disabled"],$t={class:"space-y-6"},jt={class:"space-y-2"},St={key:0},Et=["value"],zt=["value"],At={class:"space-y-2 pt-4"},Bt={class:"space-y-3 text-sm"},Vt={class:"mt-1 text-secondary-700"},Tt={key:0},Rt={class:"mt-1 text-secondary-700"},Ht={key:1},Lt={class:"mt-1 text-secondary-700"},Dt={key:2},Ut={class:"mt-1 text-secondary-700"},It={key:3},Ft={class:"mt-1 text-secondary-700"},Pt={key:4},Nt={class:"mt-1 text-secondary-700"},Ot={key:5},qt={class:"mt-1 text-secondary-700"},Gt={key:0,class:"ml-2 text-red-600"},Jt={key:6},Kt={class:"mt-1 text-secondary-700"},Qt={key:7},Wt={class:"mt-1 text-secondary-700"},Xt=3e4,es={__name:"Show",props:{ticket:Object,users:Array,statuses:Object,priorities:Object,canEdit:Boolean},setup(o){const k=se(),m=o,j=R(()=>k.props.auth?.user),b=R(()=>j.value?.tipo_usuario==="admin"),w=R(()=>j.value?.tipo_usuario==="tech"),p=B(!1),_=B(""),h=B(null),i=H({comment:"",type:"public",is_private:!1}),n=H({status:m.ticket.status}),a=H({assigned_to:m.ticket.assigned_to||""}),V=()=>{i.is_private=i.type==="internal",i.post(route("tickets.comments",m.ticket.id),{preserveScroll:!0,onSuccess:()=>{i.reset(),i.type="public"}})},T=()=>{i.comment=`ðŸ”” Necesito informaciÃ³n adicional para poder resolver este ticket.

Por favor, proporciona mÃ¡s detalles sobre:
- `,i.type="public",setTimeout(()=>{document.getElementById("comment")?.focus()},100)},S=()=>{n.patch(route("tickets.status",m.ticket.id),{preserveScroll:!0})},G=()=>{a.patch(route("tickets.assign",m.ticket.id),{preserveScroll:!0})},J=()=>{A.patch(route("tickets.resolve",m.ticket.id),{},{preserveScroll:!0})},K=()=>{A.patch(route("tickets.close",m.ticket.id),{},{preserveScroll:!0})},Q=()=>{A.patch(route("tickets.reopen",m.ticket.id),{},{preserveScroll:!0})},W=x=>{const t={blue:"bg-blue-100 text-blue-800",cyan:"bg-cyan-100 text-cyan-800",yellow:"bg-yellow-100 text-yellow-800",orange:"bg-orange-100 text-orange-800",green:"bg-green-100 text-green-800",gray:"bg-gray-100 text-gray-800",red:"bg-red-100 text-red-800"};return t[x]||t.gray},X=x=>{const t={gray:"bg-gray-100 text-gray-800",blue:"bg-blue-100 text-blue-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"};return t[x]||t.gray},Y=x=>{const t={public:"bg-blue-100 text-blue-800",internal:"bg-purple-100 text-purple-800",solution:"bg-green-100 text-green-800",status_change:"bg-gray-100 text-gray-800"};return t[x]||t.public},Z=x=>x.split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),E=x=>new Date(x).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ee=x=>{const t=Math.floor(x/60),c=x%60;return t>0?`${t}h ${c}m`:`${c}m`},D=()=>{p.value||(p.value=!0,A.reload({preserveState:!0,preserveScroll:!0,only:["ticket"],onSuccess:()=>{U(),p.value=!1},onError:()=>{p.value=!1}}))},te=()=>{D()},U=()=>{const x=new Date;_.value=x.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})},I=()=>{U(),h.value=setInterval(()=>{!document.hidden&&!i.processing&&D()},Xt)},F=()=>{h.value&&(clearInterval(h.value),h.value=null)};return oe(()=>{I(),document.addEventListener("visibilitychange",()=>{document.hidden?F():I()})}),re(()=>{F()}),(x,t)=>(s(),O(ae,null,{default:g(()=>[e("div",Ie,[e("div",Fe,[e("div",Pe,[v(u(q),{href:x.route("tickets.index"),class:"rounded-lg p-2 text-secondary-600 transition-colors hover:bg-secondary-100 hover:text-secondary-900 flex-shrink-0"},{default:g(()=>[...t[4]||(t[4]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),e("div",Ne,[e("div",Oe,[e("h1",qe,l(o.ticket.ticket_number),1),e("button",{onClick:te,disabled:p.value,class:y(["rounded-lg p-1.5 text-secondary-600 transition-all hover:bg-secondary-100 hover:text-secondary-900 disabled:opacity-50 flex-shrink-0",{"animate-spin":p.value}]),title:"Actualizar ticket"},[...t[5]||(t[5]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],10,Ge)]),e("p",Je,[f(" Creado "+l(E(o.ticket.created_at))+" ",1),_.value?(s(),r("span",Ke," â€¢ Actualizado "+l(_.value),1)):d("",!0)])])]),e("div",Qe,[o.canEdit?(s(),O(u(q),{key:0,href:x.route("tickets.edit",o.ticket.id),class:"flex-1 sm:flex-initial rounded-lg border border-secondary-300 bg-white px-4 py-2 text-sm font-semibold text-secondary-700 shadow-sm hover:bg-secondary-50 text-center"},{default:g(()=>[...t[6]||(t[6]=[f(" Editar ",-1)])]),_:1},8,["href"])):d("",!0)])]),e("div",We,[e("div",Xe,[v(M,{variant:"elevated"},{default:g(()=>[e("div",Ye,[e("div",null,[e("h2",Ze,l(o.ticket.title),1),e("div",et,[e("span",{class:y([W(o.ticket.status_color),"inline-flex rounded-full px-3 py-1 text-xs font-semibold"])},l(o.ticket.status_label),3),e("span",{class:y([X(o.ticket.priority_color),"inline-flex rounded-full px-3 py-1 text-xs font-semibold"])},l(o.ticket.priority_label),3),e("span",tt,[t[7]||(t[7]=e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),f(" "+l(o.ticket.category_label),1)])])]),e("div",st,[t[8]||(t[8]=e("h3",{class:"text-sm font-medium text-secondary-900"},"DescripciÃ³n",-1)),e("p",ot,l(o.ticket.description),1)])])]),_:1}),v(M,{variant:"elevated"},{default:g(()=>[t[16]||(t[16]=e("h3",{class:"mb-4 text-lg font-semibold text-secondary-900"},"Comentarios",-1)),e("div",rt,[(s(!0),r(C,null,$(o.ticket.comments,c=>(s(),r("div",{key:c.id,class:y(["rounded-lg border p-4",c.is_private?"border-amber-200 bg-amber-50":"border-secondary-200 bg-white"])},[e("div",nt,[e("div",it,[e("div",at,l(Z(c.user_name)),1),e("div",null,[e("p",lt,l(c.user_name),1),e("p",dt,l(E(c.created_at)),1)])]),e("div",ct,[c.is_private?(s(),r("span",ut,[...t[9]||(t[9]=[e("svg",{class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),f(" Privado ",-1)])])):d("",!0),e("span",{class:y([Y(c.type),"inline-flex rounded-full px-2 py-1 text-xs font-medium"])},l(c.type_label),3)])]),e("p",mt,l(c.comment),1)],2))),128)),o.ticket.comments.length===0?(s(),r("div",xt,[...t[10]||(t[10]=[e("svg",{class:"mx-auto h-12 w-12 text-secondary-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1),e("p",{class:"mt-2 text-sm text-secondary-500"},"No hay comentarios aÃºn",-1)])])):d("",!0)]),e("div",yt,[w.value||b.value?(s(),r("div",pt,[e("button",{type:"button",onClick:T,class:"inline-flex items-center gap-2 rounded-lg bg-amber-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-amber-700"},[...t[11]||(t[11]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),f(" Solicitar mÃ¡s informaciÃ³n ",-1)])])])):d("",!0),e("form",{onSubmit:ne(V,["prevent"]),class:"space-y-4"},[e("div",null,[t[12]||(t[12]=e("label",{for:"comment",class:"block text-sm font-medium text-secondary-700"}," Agregar comentario ",-1)),z(e("textarea",{id:"comment","onUpdate:modelValue":t[0]||(t[0]=c=>u(i).comment=c),rows:"4",placeholder:"Escribe tu comentario...",class:y(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":u(i).errors.comment}])},null,2),[[ie,u(i).comment]]),u(i).errors.comment?(s(),r("p",gt,l(u(i).errors.comment),1)):d("",!0)]),e("div",ft,[e("div",vt,[t[14]||(t[14]=e("label",{for:"comment-type",class:"block text-sm font-medium text-secondary-700 mb-1"}," Tipo de comentario ",-1)),z(e("select",{id:"comment-type","onUpdate:modelValue":t[1]||(t[1]=c=>u(i).type=c),class:"w-full sm:w-auto sm:min-w-[200px] rounded-lg border-secondary-300 py-2.5 text-base md:text-sm focus:border-primary-500 focus:ring-primary-500"},[t[13]||(t[13]=e("option",{value:"public"},"ðŸ“¢ PÃºblico - El usuario lo puede ver",-1)),w.value||b.value?(s(),r("option",kt,"ðŸ”’ Interno - Solo equipo tÃ©cnico")):d("",!0),w.value||b.value?(s(),r("option",ht,"âœ… SoluciÃ³n - Marca cÃ³mo se resolviÃ³")):d("",!0)],512),[[L,u(i).type]]),e("p",bt,[u(i).type==="public"?(s(),r("span",wt,"Visible para el usuario que reportÃ³ el ticket")):u(i).type==="internal"?(s(),r("span",_t,"Solo visible para tÃ©cnicos y administradores")):u(i).type==="solution"?(s(),r("span",Mt,"Documenta la soluciÃ³n aplicada (visible para todos)")):d("",!0)])]),e("button",{type:"submit",disabled:u(i).processing||!u(i).comment,class:"w-full sm:w-auto sm:mt-6 inline-flex items-center justify-center gap-2 rounded-lg bg-primary-600 px-6 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 min-h-[44px]"},[...t[15]||(t[15]=[e("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),f(" Agregar Comentario ",-1)])],8,Ct)])],32)])]),_:1})]),e("div",$t,[v(M,{variant:"elevated"},{default:g(()=>[t[20]||(t[20]=e("h3",{class:"mb-4 text-sm font-semibold uppercase tracking-wider text-secondary-500"}," Acciones ",-1)),e("div",jt,[o.ticket.status!=="cerrado"?(s(),r("div",St,[t[17]||(t[17]=e("label",{class:"block text-xs font-medium text-secondary-700"},"Cambiar estado",-1)),z(e("select",{"onUpdate:modelValue":t[2]||(t[2]=c=>u(n).status=c),onChange:S,class:"mt-1 block w-full rounded-lg border-secondary-300 py-2.5 text-base md:text-sm focus:border-primary-500 focus:ring-primary-500"},[(s(!0),r(C,null,$(o.statuses,(c,P)=>(s(),r("option",{key:P,value:P},l(c),9,Et))),128))],544),[[L,u(n).status]])])):d("",!0),e("div",null,[t[19]||(t[19]=e("label",{class:"block text-xs font-medium text-secondary-700"},"Asignar a",-1)),z(e("select",{"onUpdate:modelValue":t[3]||(t[3]=c=>u(a).assigned_to=c),onChange:G,class:"mt-1 block w-full rounded-lg border-secondary-300 py-2.5 text-base md:text-sm focus:border-primary-500 focus:ring-primary-500"},[t[18]||(t[18]=e("option",{value:""},"Sin asignar",-1)),(s(!0),r(C,null,$(o.users,c=>(s(),r("option",{key:c.id,value:c.id},l(c.name),9,zt))),128))],544),[[L,u(a).assigned_to]])]),e("div",At,[o.ticket.status!=="resuelto"&&o.ticket.status!=="cerrado"?(s(),r("button",{key:0,onClick:J,class:"w-full rounded-lg bg-green-600 px-4 py-2 text-sm font-semibold text-white hover:bg-green-700"}," Marcar como Resuelto ")):d("",!0),o.ticket.status==="resuelto"?(s(),r("button",{key:1,onClick:K,class:"w-full rounded-lg bg-gray-600 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-700"}," Cerrar Ticket ")):d("",!0),o.ticket.status==="cerrado"||o.ticket.status==="resuelto"?(s(),r("button",{key:2,onClick:Q,class:"w-full rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white hover:bg-blue-700"}," Reabrir Ticket ")):d("",!0)])])]),_:1}),v(M,{variant:"elevated"},{default:g(()=>[t[30]||(t[30]=e("h3",{class:"mb-4 text-sm font-semibold uppercase tracking-wider text-secondary-500"}," Detalles ",-1)),e("dl",Bt,[e("div",null,[t[21]||(t[21]=e("dt",{class:"font-medium text-secondary-900"},"Reportado por",-1)),e("dd",Vt,l(o.ticket.user_name),1)]),o.ticket.assigned_name?(s(),r("div",Tt,[t[22]||(t[22]=e("dt",{class:"font-medium text-secondary-900"},"Asignado a",-1)),e("dd",Rt,l(o.ticket.assigned_name),1)])):d("",!0),o.ticket.empresa?(s(),r("div",Ht,[t[23]||(t[23]=e("dt",{class:"font-medium text-secondary-900"},"Empresa",-1)),e("dd",Lt,l(o.ticket.empresa),1)])):d("",!0),o.ticket.sucursal?(s(),r("div",Dt,[t[24]||(t[24]=e("dt",{class:"font-medium text-secondary-900"},"Sucursal",-1)),e("dd",Ut,l(o.ticket.sucursal),1)])):d("",!0),o.ticket.location?(s(),r("div",It,[t[25]||(t[25]=e("dt",{class:"font-medium text-secondary-900"},"UbicaciÃ³n",-1)),e("dd",Ft,l(o.ticket.location),1)])):d("",!0),o.ticket.department?(s(),r("div",Pt,[t[26]||(t[26]=e("dt",{class:"font-medium text-secondary-900"},"Departamento",-1)),e("dd",Nt,l(o.ticket.department),1)])):d("",!0),o.ticket.due_date?(s(),r("div",Ot,[t[27]||(t[27]=e("dt",{class:"font-medium text-secondary-900"},"Vencimiento",-1)),e("dd",qt,[f(l(E(o.ticket.due_date))+" ",1),o.ticket.is_overdue?(s(),r("span",Gt,"(Vencido)")):d("",!0)])])):d("",!0),o.ticket.resolved_at?(s(),r("div",Jt,[t[28]||(t[28]=e("dt",{class:"font-medium text-secondary-900"},"Resuelto",-1)),e("dd",Kt,l(E(o.ticket.resolved_at)),1)])):d("",!0),o.ticket.resolution_time?(s(),r("div",Qt,[t[29]||(t[29]=e("dt",{class:"font-medium text-secondary-900"},"Tiempo de resoluciÃ³n",-1)),e("dd",Wt,l(ee(o.ticket.resolution_time)),1)])):d("",!0)])]),_:1})])]),v(M,{variant:"elevated"},{default:g(()=>[v(Ue,{activities:o.ticket.activities,"ticket-id":o.ticket.id},null,8,["activities","ticket-id"])]),_:1})])]),_:1}))}};export{es as default};
