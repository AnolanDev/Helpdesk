import{u as z,c as E,w as x,b as e,a as g,d as r,l as k,t as a,e as U,k as u,g as i,i as n,f,n as m,G as b,o as d,F as v,y as w,H as h,z as j}from"./app-C4o75e9K.js";import{_ as B,a as T}from"./Card--Y0CRRgk.js";const $={class:"mx-auto max-w-3xl space-y-6"},F={class:"flex items-center gap-4"},H={class:"mt-1 text-sm text-secondary-600"},q={key:0,class:"mt-1 text-sm text-red-600"},N={key:0,class:"mt-1 text-sm text-red-600"},O={class:"grid gap-6 sm:grid-cols-2"},P=["value"],G={key:0,class:"mt-1 text-sm text-red-600"},A=["value"],I={key:0,class:"mt-1 text-sm text-red-600"},R={key:0,class:"mt-1 text-sm text-red-600"},L={key:0,class:"mt-1 text-sm text-red-600"},Y={class:"sm:col-span-2"},J={key:0,class:"mt-1 text-sm text-red-600"},K={class:"flex items-center justify-between border-t border-secondary-200 pt-6"},Q={class:"flex items-center gap-3"},W=["disabled"],X={key:0,class:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},te={__name:"Edit",props:{ticket:Object,priorities:Object,categories:Object,users:Array},setup(p){const l=p,S=y=>{const t=new Date(y),o=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),D=String(t.getDate()).padStart(2,"0"),M=String(t.getHours()).padStart(2,"0"),_=String(t.getMinutes()).padStart(2,"0");return`${o}-${c}-${D}T${M}:${_}`},s=z({title:l.ticket.title,description:l.ticket.description,priority:l.ticket.priority,category:l.ticket.category,location:l.ticket.location||"",department:l.ticket.department||"",due_date:l.ticket.due_date?S(l.ticket.due_date):""}),V=()=>{s.patch(route("tickets.update",l.ticket.id),{onSuccess:()=>{}})},C=()=>{confirm("¿Estás seguro de que deseas eliminar este ticket? Esta acción no se puede deshacer.")&&j.delete(route("tickets.destroy",l.ticket.id))};return(y,t)=>(d(),E(T,null,{default:x(()=>[e("div",$,[e("div",F,[g(r(k),{href:y.route("tickets.show",p.ticket.id),class:"rounded-lg p-2 text-secondary-600 transition-colors hover:bg-secondary-100 hover:text-secondary-900"},{default:x(()=>[...t[7]||(t[7]=[e("svg",{class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])]),_:1},8,["href"]),e("div",null,[t[8]||(t[8]=e("h1",{class:"text-2xl font-bold text-secondary-900"},"Editar Ticket",-1)),e("p",H,a(p.ticket.ticket_number),1)])]),g(B,{variant:"elevated"},{default:x(()=>[e("form",{onSubmit:U(V,["prevent"]),class:"space-y-6"},[e("div",null,[t[9]||(t[9]=e("label",{for:"title",class:"block text-sm font-medium text-secondary-700"},[f(" Título "),e("span",{class:"text-red-500"},"*")],-1)),u(e("input",{id:"title","onUpdate:modelValue":t[0]||(t[0]=o=>r(s).title=o),type:"text",required:"",placeholder:"Describe brevemente el problema",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.title}])},null,2),[[b,r(s).title]]),r(s).errors.title?(d(),i("p",q,a(r(s).errors.title),1)):n("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{for:"description",class:"block text-sm font-medium text-secondary-700"},[f(" Descripción "),e("span",{class:"text-red-500"},"*")],-1)),u(e("textarea",{id:"description","onUpdate:modelValue":t[1]||(t[1]=o=>r(s).description=o),required:"",rows:"6",placeholder:"Proporciona todos los detalles relevantes del problema...",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.description}])},null,2),[[b,r(s).description]]),r(s).errors.description?(d(),i("p",N,a(r(s).errors.description),1)):n("",!0)]),e("div",O,[e("div",null,[t[12]||(t[12]=e("label",{for:"priority",class:"block text-sm font-medium text-secondary-700"},[f(" Prioridad "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{id:"priority","onUpdate:modelValue":t[2]||(t[2]=o=>r(s).priority=o),required:"",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.priority}])},[t[11]||(t[11]=e("option",{value:""},"Seleccionar...",-1)),(d(!0),i(v,null,w(p.priorities,(o,c)=>(d(),i("option",{key:c,value:c},a(o),9,P))),128))],2),[[h,r(s).priority]]),r(s).errors.priority?(d(),i("p",G,a(r(s).errors.priority),1)):n("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"category",class:"block text-sm font-medium text-secondary-700"},[f(" Categoría "),e("span",{class:"text-red-500"},"*")],-1)),u(e("select",{id:"category","onUpdate:modelValue":t[3]||(t[3]=o=>r(s).category=o),required:"",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.category}])},[t[13]||(t[13]=e("option",{value:""},"Seleccionar...",-1)),(d(!0),i(v,null,w(p.categories,(o,c)=>(d(),i("option",{key:c,value:c},a(o),9,A))),128))],2),[[h,r(s).category]]),r(s).errors.category?(d(),i("p",I,a(r(s).errors.category),1)):n("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{for:"location",class:"block text-sm font-medium text-secondary-700"}," Ubicación ",-1)),u(e("input",{id:"location","onUpdate:modelValue":t[4]||(t[4]=o=>r(s).location=o),type:"text",placeholder:"Ej: Piso 3, Oficina 301",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.location}])},null,2),[[b,r(s).location]]),r(s).errors.location?(d(),i("p",R,a(r(s).errors.location),1)):n("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{for:"department",class:"block text-sm font-medium text-secondary-700"}," Departamento ",-1)),u(e("input",{id:"department","onUpdate:modelValue":t[5]||(t[5]=o=>r(s).department=o),type:"text",placeholder:"Ej: IT, RRHH, Ventas",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.department}])},null,2),[[b,r(s).department]]),r(s).errors.department?(d(),i("p",L,a(r(s).errors.department),1)):n("",!0)]),e("div",Y,[t[17]||(t[17]=e("label",{for:"due_date",class:"block text-sm font-medium text-secondary-700"}," Fecha de vencimiento ",-1)),u(e("input",{id:"due_date","onUpdate:modelValue":t[6]||(t[6]=o=>r(s).due_date=o),type:"datetime-local",class:m(["mt-1 block w-full rounded-lg border-secondary-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 text-base md:text-sm",{"border-red-500":r(s).errors.due_date}])},null,2),[[b,r(s).due_date]]),r(s).errors.due_date?(d(),i("p",J,a(r(s).errors.due_date),1)):n("",!0)])]),t[20]||(t[20]=e("div",{class:"rounded-lg bg-blue-50 p-4"},[e("div",{class:"flex"},[e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])]),e("div",{class:"ml-3"},[e("p",{class:"text-sm text-blue-700"}," Para cambiar el estado o asignar el ticket, utiliza las opciones en la vista de detalle del ticket. ")])])],-1)),e("div",K,[e("button",{type:"button",onClick:C,class:"rounded-lg border border-red-300 bg-white px-4 py-2.5 text-sm font-semibold text-red-700 shadow-sm hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2"}," Eliminar Ticket "),e("div",Q,[g(r(k),{href:y.route("tickets.show",p.ticket.id),class:"rounded-lg border border-secondary-300 bg-white px-4 py-2.5 text-sm font-semibold text-secondary-700 shadow-sm hover:bg-secondary-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},{default:x(()=>[...t[18]||(t[18]=[f(" Cancelar ",-1)])]),_:1},8,["href"]),e("button",{type:"submit",disabled:r(s).processing,class:"inline-flex items-center gap-2 rounded-lg bg-primary-600 px-4 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50"},[r(s).processing?(d(),i("svg",X,[...t[19]||(t[19]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):n("",!0),f(" "+a(r(s).processing?"Guardando...":"Guardar Cambios"),1)],8,W)])])],32)]),_:1})])]),_:1}))}};export{te as default};
